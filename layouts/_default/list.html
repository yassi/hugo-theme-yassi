{{ define "main" }}
<h1 align="center">{{ .Title }}</h1>
<div class="content">
  {{ .Content }}

  {{ if eq .Section "projects" }}
  <!-- Projects Grid Layout -->
  <div class="featured-grid">
    {{ range .Pages }}
    <article class="featured-card">
      {{ $projectUrl := .RelPermalink }}
      {{ $isExternal := false }}
      {{ if .Params.project_url }}
      {{ $projectUrl = .Params.project_url }}
      {{ $isExternal = true }}
      {{ end }}
      <a href="{{ $projectUrl }}" {{ if $isExternal }}target="_blank" rel="noopener noreferrer" {{ end }}>
        {{ if .Params.main_image }}
        <div class="featured-image" style="background-image: url('{{ .Params.main_image }}');">
          <div class="featured-overlay">
            <h3 class="featured-card-title">
              {{ .Title }}
              {{ if $isExternal }}<span class="external-link-icon">↗</span>{{ end }}
            </h3>
          </div>
        </div>
        {{ else }}
        <div class="featured-image featured-no-image">
          <div class="featured-overlay">
            <h3 class="featured-card-title">
              {{ .Title }}
              {{ if $isExternal }}<span class="external-link-icon">↗</span>{{ end }}
            </h3>
          </div>
        </div>
        {{ end }}
        {{ if .Params.summary }}
        <p class="featured-summary">{{ .Params.summary }}</p>
        {{ end }}
      </a>
    </article>
    {{ end }}
  </div>
  {{ else }}
  <!-- Regular List Layout for Posts -->
  <ul class="home-list">
    {{ range .Pages }}
    <li class="home-list-div">
      <a href="{{ .RelPermalink }}" class="home-list-link">
        <span class="home-list-date">{{ .Date | time.Format ":date_medium" }}</span>
        <span class="home-list-title">{{.LinkTitle}}</span>
        <span class="home-list-duration">{{.ReadingTime }} min read</span>
      </a>
    </li>
    {{ end }}
  </ul>
  {{ end }}

</div>
{{ end }}
