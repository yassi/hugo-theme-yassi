{{ define "main" }}
<div class="content">
  <h1>{{ .Title }}</h1>

  <p class="term-description">
    {{ .Params.description | default (printf "%d posts tagged with \"%s\"" (len .Pages) .Title) }}
  </p>

  <!-- Posts List -->
  {{ $filteredPages := where .Pages "Section" "!=" "projects" }}
  {{ $projectsInList := where (where .Pages "Section" "projects") "Params.showInPostList" true }}
  {{ $allPages := union $filteredPages $projectsInList }}
  {{ $sortedPages := $allPages.ByDate.Reverse }}
  {{ if $sortedPages }}
  <ul class="home-list">
    {{ range $sortedPages }}
    <li class="home-list-div">
      <a href="{{ .RelPermalink }}" class="home-list-link">
        <span class="home-list-date">{{ .Date | time.Format ":date_medium" }}</span>
        {{ if eq .Section "projects" }}
        <span class="home-list-project-badge">PROJECT</span>
        {{ end }}
        <span class="home-list-title">{{ .LinkTitle }}</span>
        <span class="home-list-duration">{{ .ReadingTime }} min read</span>
      </a>
    </li>
    {{ end }}
  </ul>
  {{ else }}
  <p class="no-posts">No posts found with this tag.</p>
  {{ end }}
</div>
{{ end }}
